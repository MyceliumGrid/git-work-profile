# 交互式模式使用指南

## 什么是交互式模式？

交互式模式是一个友好的图形化界面，通过问答的方式引导你完成配置，无需记住复杂的命令行参数。

## 启动交互式模式

只需运行命令，不带任何参数：

```bash
git-work-profile
```

## 交互流程

### 1. API密钥检查

如果未设置 `GEMINI_API_KEY` 环境变量，会提示：

```
⚠️  未检测到 GEMINI_API_KEY 环境变量

获取API密钥:
1. 访问 https://makersuite.google.com/app/apikey
2. 创建或选择项目
3. 生成API密钥

? 请输入 Gemini API Key: ********
```

输入后会询问是否保存到配置文件。

### 2. 选择分析类型

```
? 选择分析类型:
  ▸ 开发者画像 (profile) - 全面分析技术能力和工作特点
    项目经验 (experience) - 总结项目经验和实践能力
    技术栈分析 (techstack) - 深度分析技术栈构成
```

使用 ↑↓ 键选择，回车确认。

### 3. 选择时间范围

```
? 选择分析时间范围:
    最近3个月 (3m)
  ▸ 最近6个月 (6m) - 推荐
    最近1年 (1y)
    最近2年 (2y)
```

默认选中6个月（推荐）。

### 4. 选择仓库模式

```
? 选择仓库分析模式:
  ▸ 当前目录 - 分析当前Git仓库
    指定单个仓库 - 分析指定的Git仓库
    多仓库目录 - 分析目录下所有Git仓库（推荐）
```

- **当前目录**: 分析当前所在的Git仓库
- **指定单个仓库**: 输入仓库路径
- **多仓库目录**: 输入包含多个Git仓库的目录路径

如果选择"多仓库目录"，会提示：

```
? 输入仓库目录路径（包含多个Git仓库）: ~/projects
```

工具会自动检测常见的项目目录（如 ~/projects, ~/work, ~/code 等）作为默认值。

### 5. 选择输出格式

```
? 选择输出格式:
  ▸ Markdown - 格式化文档（推荐）
    JSON - 结构化数据
    Text - 纯文本
```

### 6. 设置输出文件

```
? 输出文件路径（留空则输出到终端）: developer-profile.md
```

会根据分析类型和输出格式自动生成默认文件名：
- 开发者画像 → `developer-profile.md`
- 项目经验 → `project-experience.md`
- 技术栈分析 → `techstack-analysis.md`

留空则直接输出到终端。

### 7. 指定作者（可选）

```
? 指定Git作者名称（留空则分析所有作者）: 
```

如果只想分析特定开发者的提交，输入作者名称。留空则分析所有作者。

### 8. 确认配置

```
📋 配置摘要
================================================
分析类型: profile
时间范围: 6m
仓库路径: ~/projects
输出格式: markdown
输出文件: developer-profile.md

? 确认开始分析 (y/N): y
```

确认后开始分析。

## 示例会话

```bash
$ git-work-profile

🎨 Git Developer Profile Analyzer - 交互式配置
================================================

? 选择分析类型: 开发者画像 (profile) - 全面分析技术能力和工作特点
? 选择分析时间范围: 最近6个月 (6m) - 推荐
? 选择仓库分析模式: 多仓库目录 - 分析目录下所有Git仓库（推荐）
? 输入仓库目录路径（包含多个Git仓库）: ~/projects
? 选择输出格式: Markdown - 格式化文档（推荐）
? 输出文件路径（留空则输出到终端）: my-profile.md
? 指定Git作者名称（留空则分析所有作者）: 

📋 配置摘要
================================================
分析类型: profile
时间范围: 6m
仓库路径: /Users/username/projects
输出格式: markdown
输出文件: my-profile.md

? 确认开始分析 y

🚀 开始分析...

分析时间范围: 6m (2024-05-30 到 2024-11-30)

处理 5 个仓库:
正在分析仓库: /Users/username/projects/project1
  找到 45 条提交记录
正在分析仓库: /Users/username/projects/project2
  找到 32 条提交记录
...

正在使用AI进行深度分析...
分析类型: 开发者画像

✓ 分析完成！
报告已保存到: my-profile.md
```

## 优势

### 对比命令行模式

**命令行模式**（需要记住参数）:
```bash
git-work-profile --repos ~/projects --range 6m --analysis profile --format markdown --output my-profile.md
```

**交互式模式**（友好引导）:
```bash
git-work-profile
# 然后按提示选择即可
```

### 适用场景

- ✅ 第一次使用，不熟悉命令行参数
- ✅ 不确定选择哪些配置选项
- ✅ 想要快速生成报告，不想查文档
- ✅ 需要输入API密钥
- ✅ 偶尔使用，记不住参数

### 何时使用命令行模式

- 自动化脚本
- CI/CD 集成
- 批量处理
- 已经熟悉所有参数

## 快捷键

- `↑` `↓` - 上下移动选项
- `Enter` - 确认选择
- `Ctrl+C` - 取消退出
- `y` / `n` - 确认提示的是/否

## 提示

1. **首次使用**: 建议使用交互式模式，熟悉各个选项
2. **API密钥**: 首次输入后建议保存到环境变量
3. **默认值**: 大部分选项都有合理的默认值，可以直接回车
4. **取消操作**: 任何时候按 `Ctrl+C` 都可以取消
5. **重新运行**: 如果配置错误，可以取消后重新运行

## 常见问题

### Q: 如何跳过交互式模式？
A: 指定任何命令行参数即可自动使用命令行模式：
```bash
git-work-profile --analysis profile
```

### Q: 可以保存配置吗？
A: 目前不支持保存配置文件，但可以使用命令行参数或创建shell别名：
```bash
alias myprofile='git-work-profile --repos ~/projects --range 6m --analysis profile'
```

### Q: 交互式模式支持所有功能吗？
A: 是的，交互式模式支持所有命令行参数的功能。

### Q: 如何在脚本中使用？
A: 脚本中应该使用命令行模式，不要使用交互式模式。
